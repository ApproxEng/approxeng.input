<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simple Usage &mdash; Approximate Engineering - Input 2.6.4 documentation</title>
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/documentation_options.js?v=5248d183"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Approximate Engineering - Input 2.6.4 documentation"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command-line tools" href="commandline.html" />
    <link rel="prev" title="Change Log" href="changelog.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Approximate Engineering - Input
          </a>
              <div class="version">
                2.6.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Simple Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-a-controller">Connecting to a controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-multiple-controllers">Connecting to multiple controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-analogue-axes">Reading Analogue Axes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#circular-analogue-axes">Circular Analogue Axes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#checking-for-held-buttons">Checking for Held Buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-multiple-axis-or-button-hold-values">Reading multiple Axis or Button Hold values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#querying-button-presses">Querying Button Presses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#standard-names">Standard Names</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#button-names">Button Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#axis-names">Axis Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#force-feedback-effects">Force feedback effects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command-line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="bluetooth.html">Pairing Controllers over Bluetooth</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiling.html">Profiling and Testing Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="addingcontrollers.html">Adding support for a new controller type</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="howtouse.html">Advanced Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="sys.html">LEDs and Battery Monitoring</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Approximate Engineering - Input</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Simple Usage</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="simple-usage">
<span id="simple-api"></span><h1>Simple Usage<a class="headerlink" href="#simple-usage" title="Link to this heading">¶</a></h1>
<p>In version 2.0 of this library, the API has been simplified and made more Python-like. Rather than having to fetch
nested objects containing axis and button information, all the most common operations are now available as methods and
attributes of the controller class itself. Read on…</p>
<section id="connecting-to-a-controller">
<h2>Connecting to a controller<a class="headerlink" href="#connecting-to-a-controller" title="Link to this heading">¶</a></h2>
<p>To connect to a controller you do the following (including error handling):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Found a joystick and connected&#39;</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
                <span class="c1"># Do stuff with your joystick here!</span>
                <span class="c1"># ....</span>
                <span class="c1"># ....</span>
        <span class="c1"># Joystick disconnected...</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection to joystick lost&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="c1"># No joystick found, wait for a bit before trying again</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unable to find any joysticks&#39;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>This example will loop forever. It will attempt to connect to any supported joystick - the ControllerResource will raise
IOError if it can’t find one, otherwise it will do all the necessary background work, create a controller object and, in
this case, bind it to the ‘joystick’ variable which can then be used to read axes, buttons etc.</p>
<p>The <a class="reference internal" href="api/input.html#approxeng.input.Controller.connected" title="approxeng.input.Controller.connected"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connected()</span></code></a> property on the joystick object indicates whether the underlying
device is connected or not - if, for example, you have a controller that goes out of range, runs out of batteries, or is
turned off while in use this will be set to False and you can handle the case correctly (if using this code in a robot,
this would be an excellent time to turn of all your motors, for instance!)</p>
<p>The <a class="reference internal" href="api/selectbinder.html#approxeng.input.selectbinder.ControllerResource" title="approxeng.input.selectbinder.ControllerResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControllerResource</span></code></a> class accepts a number of, optional, arguments. These can be
used to tell it which controller type to use (the default is to connect to the first controller it can understand, but
if you have multiple controllers connected for some reason you might want to tell it to use your XBox1 rather than your
PS4 controller). They can also be used to configure the default settings for axes, and there’s an option to print out
debug information. In general though you’ll only ever need the simple form shown here.</p>
<p>Once you have a controller object you can use it to read axes and buttons, both of which are referenced by a standard
name (see  <a class="reference internal" href="#sname-label"><span class="std std-ref">Standard Names</span></a>) - this allows you to not worry too much about exactly what controller’s going to be
present. Rather than having to know that the XBox controller has ‘A’,’B’… and so on, whereas the Playstation
controllers have ‘cross’, ‘circle’ etc the API defines a standard set of names for buttons and axes (they’re based on
the PS3 controller as it happens, mostly because that’s the one I first used when I started writing the library!).</p>
</section>
<section id="connecting-to-multiple-controllers">
<h2>Connecting to multiple controllers<a class="headerlink" href="#connecting-to-multiple-controllers" title="Link to this heading">¶</a></h2>
<p>To connect to multiple controllers, or to be more specific about the types and capabilities of controllers you need,
see <a class="reference internal" href="api/discovery.html#discovery-reference-label"><span class="std std-ref">Controller Discovery - approxeng.input.controllers</span></a>. The example below shows binding to two controllers, the first of which must be
a PS3 controller, the second of which must have a left X and Y axis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>
<span class="kn">from</span> <span class="nn">approxeng.input.dualshock3</span> <span class="kn">import</span> <span class="n">DualShock3</span>
<span class="kn">from</span> <span class="nn">approxeng.input.controllers</span> <span class="kn">import</span> <span class="n">ControllerRequirement</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">ControllerResource</span><span class="p">(</span><span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_class</span><span class="o">=</span><span class="n">DualShock3</span><span class="p">),</span>
                                <span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_snames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lx&#39;</span><span class="p">,</span><span class="s1">&#39;ly&#39;</span><span class="p">]))</span> <span class="k">as</span> <span class="n">ds3</span><span class="p">,</span> <span class="n">joystick</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Found two joysticks and connected&#39;</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span> <span class="ow">and</span> <span class="n">ds3</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
                <span class="c1"># Do stuff with your joystick here!</span>
                <span class="c1"># ....</span>
                <span class="c1"># ....</span>
        <span class="c1"># One or both joystick(s) disconnected...</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection to joystick(s) lost&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="c1"># No matching joystick found, wait for a bit before trying again</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unable to find matching joysticks&#39;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reading-analogue-axes">
<h2>Reading Analogue Axes<a class="headerlink" href="#reading-analogue-axes" title="Link to this heading">¶</a></h2>
<p>Analogue axes are those which vary continuously, allowing for fine control of motion. Unlike buttons, which are either
on or off, an analogue axis has a floating point value associated with its current position.</p>
<blockquote>
<div><ul class="simple">
<li><p>Centred axes have a value ranging from -1.0 to 1.0</p></li>
<li><p>Trigger axes have a value ranging from 0.0 to 1.0</p></li>
</ul>
</div></blockquote>
<p>Axis values are read as properties of the joystick object (in this and other examples we’re not showing the exception
handling from the first example, but you should still do it!):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># Get a corrected value for the left stick x-axis</span>
        <span class="n">left_x</span> <span class="o">=</span> <span class="n">joystick</span><span class="p">[</span><span class="s1">&#39;lx&#39;</span><span class="p">]</span>
        <span class="c1"># We can also get values as attributes:</span>
        <span class="n">left_y</span> <span class="o">=</span> <span class="n">joystick</span><span class="o">.</span><span class="n">ly</span>
</pre></div>
</div>
<p>…and that’s it! You might have used other libraries which require you to do event handling and similar, but in this
case all that stuff is taken care of in the background and you just have to read the information you want from the
joystick object.</p>
<section id="circular-analogue-axes">
<h3>Circular Analogue Axes<a class="headerlink" href="#circular-analogue-axes" title="Link to this heading">¶</a></h3>
<p>As of version 2.4, if a controller defines pairs of <cite>(lx,ly)</cite>, or <cite>(rx,ry)</cite>, a new virtual axis is created called <cite>l</cite> or
<cite>r</cite> respectively. This is an instance of <a class="reference internal" href="api/input.html#approxeng.input.CircularCentredAxis" title="approxeng.input.CircularCentredAxis"><code class="xref py py-class docutils literal notranslate"><span class="pre">CircularCentredAxis</span></code></a>. Unlike other axes which return
a single floating point value, this axis type returns a tuple of <cite>(x,y)</cite> floats. Obviously you could do this yourself
by calling the individual horizontal and vertical axes, but this circular axis has a subtle improvement to how it
handles dead and hot zones - areas where you want either no output (the deadzone in the middle) or full output (the hot
zones at either end of the range). Specifically, it judges whether a position is in the dead or hot zone based on the
overall distance of the stick from the centre, taking both axes into account, and then scales both values such that the
direction is preserved and the magnitude scaled. For cases where you genuinely want to control a two dimensional
quantity with the stick this will result in much smoother, more consistent, motion, without the pauses in response as
the stick crosses each of the independent x and y axis dead zones.</p>
<p>If you’re using a single stick to control two different quantities, such as a four wheel robot where you’ve mapped
acceleration and steering onto a single stick, you probably want to continue to use the individual axes! Experiment and
see which setting feels best for you.</p>
<p>As with other axes and buttons, you can fetch the values of these extra axes in a couple of different ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># Get a corrected tuple of values from the left stick, assign the two values to x and y</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">joystick</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">]</span>
        <span class="c1"># We can also get values as attributes:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">joystick</span><span class="o">.</span><span class="n">l</span>
</pre></div>
</div>
</section>
</section>
<section id="checking-for-held-buttons">
<h2>Checking for Held Buttons<a class="headerlink" href="#checking-for-held-buttons" title="Link to this heading">¶</a></h2>
<p>You can also check whether a button is currently held, and, if so, how long it’s been held for to-date in seconds:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># Hold times are accessible as attributes on the joystick object, passing a button name</span>
        <span class="n">held</span> <span class="o">=</span> <span class="n">joystick</span><span class="p">[</span><span class="s1">&#39;square&#39;</span><span class="p">]</span>
        <span class="c1"># If the button isn&#39;t held at the moment this will be None</span>
        <span class="k">if</span> <span class="n">held</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># If the button was held, this is the number of seconds since it was initially pressed</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Square held for </span><span class="si">{}</span><span class="s1"> seconds&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">held</span><span class="p">))</span>
        <span class="c1"># We can also access directly as an attribute</span>
        <span class="n">circle_held</span> <span class="o">=</span> <span class="n">joystick</span><span class="o">.</span><span class="n">circle</span>
</pre></div>
</div>
</section>
<section id="reading-multiple-axis-or-button-hold-values">
<h2>Reading multiple Axis or Button Hold values<a class="headerlink" href="#reading-multiple-axis-or-button-hold-values" title="Link to this heading">¶</a></h2>
<p>You can read multiple axis values and button hold times in a single call, simply by passing multiple names into the
call (you can, as the example below shows, query a mix of button hold times and axis values in one call):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># Get the left x and y axes, and the hold time for the home button. The result is a list, and we can</span>
        <span class="c1"># use Python&#39;s implicit decomposition to read the values of that list into three variables in one go:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">hold</span> <span class="o">=</span> <span class="n">joystick</span><span class="p">[</span><span class="s1">&#39;lx&#39;</span><span class="p">,</span><span class="s1">&#39;ly&#39;</span><span class="p">,</span><span class="s1">&#39;home&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="querying-button-presses">
<span id="poll-presses-label"></span><h2>Querying Button Presses<a class="headerlink" href="#querying-button-presses" title="Link to this heading">¶</a></h2>
<p>Another common requirement you’ll have will be to find out whether the user pressed a button, even if they’re not
currently holding it down. This sounds obvious, but in fact it’s slightly more subtle - what you really want to know is
whether the user pressed a button at any point since you last asked this question! That way, even if you don’t ask very
often you won’t miss button presses and you don’t have to worry about the user pressing so fast you can’t detect it.</p>
<p>This is therefore a two-part process - you must first tell the controller to read out whether any buttons were pressed,
this actually both returns a <a class="reference internal" href="api/input.html#approxeng.input.ButtonPresses" title="approxeng.input.ButtonPresses"><code class="xref py py-class docutils literal notranslate"><span class="pre">ButtonPresses</span></code></a> object, and also stores that object as the <a class="reference internal" href="api/input.html#approxeng.input.Controller.presses" title="approxeng.input.Controller.presses"><code class="xref py py-meth docutils literal notranslate"><span class="pre">presses()</span></code></a>
property of the controller for later access.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This means the button presses are those buttons which were pressed between the most recent call to <a class="reference internal" href="api/input.html#approxeng.input.Controller.check_presses" title="approxeng.input.Controller.check_presses"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_presses()</span></code></a>
and the one before that. Only call <a class="reference internal" href="api/input.html#approxeng.input.Controller.check_presses" title="approxeng.input.Controller.check_presses"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_presses()</span></code></a> once per loop, before the code you then want to read the presses
attribute</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until we&#39;re disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># This is an instance of approxeng.input.ButtonPresses</span>
        <span class="n">presses</span> <span class="o">=</span> <span class="n">joystick</span><span class="o">.</span><span class="n">check_presses</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">presses</span><span class="p">[</span><span class="s1">&#39;square&#39;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SQUARE pressed since last check&#39;</span><span class="p">)</span>
        <span class="c1"># We can also use attributes directly, and get at the presses object from the controller:</span>
        <span class="k">if</span> <span class="n">joystick</span><span class="o">.</span><span class="n">presses</span><span class="o">.</span><span class="n">circle</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CIRCLE pressed since last check&#39;</span><span class="p">)</span>
        <span class="c1"># Or we can use the &#39;x in y&#39; syntax:</span>
        <span class="k">if</span> <span class="s1">&#39;triangle&#39;</span> <span class="ow">in</span> <span class="n">presses</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TRIANGLE pressed since last check&#39;</span><span class="p">)</span>

        <span class="c1"># If we had any presses, print the list of pressed buttons by standard name</span>
        <span class="k">if</span> <span class="n">joystick</span><span class="o">.</span><span class="n">has_presses</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">joystick</span><span class="o">.</span><span class="n">presses</span><span class="p">)</span>
</pre></div>
</div>
<p>As of version 2.5.0, you can also query for button releases in the same way. Because the return type for <a class="reference internal" href="api/input.html#approxeng.input.Controller.check_presses" title="approxeng.input.Controller.check_presses"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_presses()</span></code></a>
has not changed, you can only access the button releases through the parent controller object’s <cite>releases</cite> property, i.e.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>

<span class="c1"># Get a joystick</span>
<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">()</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Loop until we&#39;re disconnected</span>
    <span class="k">while</span> <span class="n">joystick</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
        <span class="c1"># Call check_presses at the top of the loop to check for presses and releases, this returns the buttons</span>
        <span class="c1"># pressed, but not the ones released. It does, however, have the side effect of updating the</span>
        <span class="c1"># joystick.presses and joystick.releases properties, so you use it even if you&#39;re not storing the return</span>
        <span class="c1"># value anywhere.</span>
        <span class="n">joystick</span><span class="o">.</span><span class="n">check_presses</span><span class="p">()</span>
        <span class="c1"># Check for a button press</span>
        <span class="k">if</span> <span class="n">joystick</span><span class="o">.</span><span class="n">presses</span><span class="o">.</span><span class="n">circle</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CIRCLE pressed since last check&#39;</span><span class="p">)</span>
        <span class="c1"># Check for a button release</span>
        <span class="k">if</span> <span class="n">joystick</span><span class="o">.</span><span class="n">releases</span><span class="o">.</span><span class="n">circle</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CIRCLE released since last check&#39;</span><span class="p">)</span>

        <span class="c1"># If we had any releases, print the list of released buttons by standard name</span>
        <span class="k">if</span> <span class="n">joystick</span><span class="o">.</span><span class="n">has_releases</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">joystick</span><span class="o">.</span><span class="n">releases</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="standard-names">
<span id="sname-label"></span><h1>Standard Names<a class="headerlink" href="#standard-names" title="Link to this heading">¶</a></h1>
<p>Most of the controllers supported by this library are fairly similar - they have two analogue joysticks, a bunch of
buttons, some triggers etc. It would be helpful therefore to be able to make use of one controller type but make it as
easy as possible to use others without substantial code changes in your own code.</p>
<p>To do this the library assigns a standard name, or <cite>sname</cite> to each button and axis on every controller. These are based
loosely on the buttons found on a PS3 controller, at the cost of minor confusion for the XBox users (where, for example,
the <cite>X</cite> button is referred to by the name <cite>square</cite>). As long as you use controls which are common to all three
controllers you should be able to transparently make use of whichever of them is available at the time. You can also
choose to make use of facilities which are only available on specific hardware (such as the analogue triggers on the PS4
and XBoxOne controllers) but you should bear in mind that this will preclude use of a less well equipped controller. Up
to you.</p>
<p>A look at the source for each of the controller subclasses should make it obvious what names are available, but the
standard ones are as follows:</p>
<section id="button-names">
<h2>Button Names<a class="headerlink" href="#button-names" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Standard name</p></td>
<td><p>PS3</p></td>
<td><p>PS4</p></td>
<td><p>XBoxOne</p></td>
<td><p>Rock Candy</p></td>
<td><p>Steam</p></td>
<td><p>Wii Pro</p></td>
</tr>
<tr class="row-even"><td><p>square</p></td>
<td><p>Square</p></td>
<td><p>Square</p></td>
<td><p>X</p></td>
<td><p>4 Dot</p></td>
<td><p>X</p></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p>triangle</p></td>
<td><p>Triangle</p></td>
<td><p>Triangle</p></td>
<td><p>Y</p></td>
<td><p>3 Dot</p></td>
<td><p>Y</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>circle</p></td>
<td><p>Circle</p></td>
<td><p>Circle</p></td>
<td><p>B</p></td>
<td><p>6 Dot</p></td>
<td><p>B</p></td>
<td><p>A</p></td>
</tr>
<tr class="row-odd"><td><p>cross</p></td>
<td><p>Cross</p></td>
<td><p>Cross</p></td>
<td><p>A</p></td>
<td><p>5 Dot</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
</tr>
<tr class="row-even"><td><p>ls</p></td>
<td><p>Left Stick</p></td>
<td><p>Left Stick</p></td>
<td><p>Left Stick</p></td>
<td><p>Left Stick</p></td>
<td><p>Left Stick</p></td>
<td><p>Left Stick</p></td>
</tr>
<tr class="row-odd"><td><p>rs</p></td>
<td><p>Right Stick</p></td>
<td><p>Right Stick</p></td>
<td><p>Right Stick</p></td>
<td><p>Right Stick</p></td>
<td><p>Right Stick</p></td>
<td><p>Right Stick</p></td>
</tr>
<tr class="row-even"><td><p>select</p></td>
<td><p>Select</p></td>
<td><p>Share</p></td>
<td><p>View</p></td>
<td><p>Select</p></td>
<td><p>Left Arrow</p></td>
<td><p>Select</p></td>
</tr>
<tr class="row-odd"><td><p>start</p></td>
<td><p>Start</p></td>
<td><p>Options</p></td>
<td><p>Menu</p></td>
<td><p>Start</p></td>
<td><p>Right Arrow</p></td>
<td><p>Start</p></td>
</tr>
<tr class="row-even"><td><p>home</p></td>
<td><p>PS</p></td>
<td><p>PS</p></td>
<td><p>XBox</p></td>
<td><p>Home</p></td>
<td><p>Steam</p></td>
<td><p>Home</p></td>
</tr>
<tr class="row-odd"><td><p>dleft</p></td>
<td><p>DPad Left</p></td>
<td><p>DPad Left</p></td>
<td><p>DPad Left</p></td>
<td><p>DPad Left</p></td>
<td><p>DPad Left</p></td>
<td><p>DPad Left</p></td>
</tr>
<tr class="row-even"><td><p>dup</p></td>
<td><p>DPad Up</p></td>
<td><p>DPad Up</p></td>
<td><p>DPad Up</p></td>
<td><p>DPad Up</p></td>
<td><p>DPad Up</p></td>
<td><p>DPad Up</p></td>
</tr>
<tr class="row-odd"><td><p>dright</p></td>
<td><p>DPad Right</p></td>
<td><p>DPad Right</p></td>
<td><p>DPad Right</p></td>
<td><p>DPad Right</p></td>
<td><p>DPad Right</p></td>
<td><p>DPad Right</p></td>
</tr>
<tr class="row-even"><td><p>ddown</p></td>
<td><p>DPad Down</p></td>
<td><p>DPad Down</p></td>
<td><p>Dpad Down</p></td>
<td><p>DPad Down</p></td>
<td><p>DPad Down</p></td>
<td><p>DPad Down</p></td>
</tr>
<tr class="row-odd"><td><p>l1</p></td>
<td><p>L1 Trigger</p></td>
<td><p>L1 Trigger</p></td>
<td><p>LB Trigger</p></td>
<td><p>L1 Trigger</p></td>
<td><p>LB</p></td>
<td><p>L</p></td>
</tr>
<tr class="row-even"><td><p>l2</p></td>
<td><p>L2 Trigger</p></td>
<td><p>L2 Trigger</p></td>
<td><p>LT Trigger</p></td>
<td><p>L2 Trigger</p></td>
<td><p>—</p></td>
<td><p>LZ</p></td>
</tr>
<tr class="row-odd"><td><p>r1</p></td>
<td><p>R1 Trigger</p></td>
<td><p>R1 Trigger</p></td>
<td><p>RB Trigger</p></td>
<td><p>R1 Trigger</p></td>
<td><p>RB</p></td>
<td><p>R</p></td>
</tr>
<tr class="row-even"><td><p>r2</p></td>
<td><p>R2 Trigger</p></td>
<td><p>R2 Trigger</p></td>
<td><p>RT Trigger</p></td>
<td><p>R2 Trigger</p></td>
<td><p>—</p></td>
<td><p>RZ</p></td>
</tr>
<tr class="row-odd"><td><p>ps4_pad</p></td>
<td><p>—</p></td>
<td><p>Trackpad</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
</tbody>
</table>
<p>…and some more, because we now have too many controllers to fit on one table!</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Standard name</p></td>
<td><p>PiHut</p></td>
</tr>
<tr class="row-even"><td><p>square</p></td>
<td><p>Square</p></td>
</tr>
<tr class="row-odd"><td><p>triangle</p></td>
<td><p>Triangle</p></td>
</tr>
<tr class="row-even"><td><p>circle</p></td>
<td><p>Circle</p></td>
</tr>
<tr class="row-odd"><td><p>cross</p></td>
<td><p>Cross</p></td>
</tr>
<tr class="row-even"><td><p>ls</p></td>
<td><p>Left Stick</p></td>
</tr>
<tr class="row-odd"><td><p>rs</p></td>
<td><p>Right Stick</p></td>
</tr>
<tr class="row-even"><td><p>select</p></td>
<td><p>Select</p></td>
</tr>
<tr class="row-odd"><td><p>start</p></td>
<td><p>Start</p></td>
</tr>
<tr class="row-even"><td><p>home</p></td>
<td><p>Analog</p></td>
</tr>
<tr class="row-odd"><td><p>dleft</p></td>
<td><p>DPad Left</p></td>
</tr>
<tr class="row-even"><td><p>dup</p></td>
<td><p>DPad Up</p></td>
</tr>
<tr class="row-odd"><td><p>dright</p></td>
<td><p>DPad Right</p></td>
</tr>
<tr class="row-even"><td><p>ddown</p></td>
<td><p>DPad Down</p></td>
</tr>
<tr class="row-odd"><td><p>l1</p></td>
<td><p>L1 Trigger</p></td>
</tr>
<tr class="row-even"><td><p>l2</p></td>
<td><p>L2 Trigger</p></td>
</tr>
<tr class="row-odd"><td><p>r1</p></td>
<td><p>R1 Trigger</p></td>
</tr>
<tr class="row-even"><td><p>r2</p></td>
<td><p>R2 Trigger</p></td>
</tr>
<tr class="row-odd"><td><p>ps4_pad</p></td>
<td><p>—</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The PiHut controller has a <cite>turbo</cite> button which isn’t currently mapped to any button in the API.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The lack of <cite>l2</cite> and <cite>r2</cite> for the Steam controller is because these buttons don’t appear as buttons in the
event stream.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The DualShock4 trackpad now (as of 2.1.0) works as both a button when pressed, and a pair of absolute axes <cite>tx</cite>
and <cite>ty</cite> representing a single touch point. While the controller supports a pair of touches, the library doesn’t!
The touch coordinates range from -1.0 to 1.0, with positive to the right and forwards when holding the controller.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Yes, the Wii Remote Pro buttons really are that way around. Although it has the same buttons as an XBox controller
they’re in different locations. The standard names are set to prioritise location (and therefore kinetic memory)
so, for example, the <cite>X</cite> button on the Wii Remote Pro is in the same place as the triangle button on the PS3 and PS4
so we call it <cite>triangle</cite>, whereas the XBox controller has a <cite>Y</cite> button there instead.</p>
</div>
</section>
<section id="axis-names">
<h2>Axis Names<a class="headerlink" href="#axis-names" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With a new kernel (4.13 upwards, tested with 4.15) the Sony controllers expose their motion events in a way we can
handle, so I’ve added pitch and roll for both controllers, and yaw rate for the DS4. There is no absolute yaw value
available, you’d have to calculate this from the rates (tricky to do with any accuracy). Roll is positive clockwise
when holding the controller, pitch is positive aiming the front of the controller towards the ceiling. Available
in 2.1.0 of this library onwards.</p>
</div>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Standard name</p></td>
<td><p>PS3</p></td>
<td><p>PS4</p></td>
<td><p>XBoxOne</p></td>
<td><p>Rock Candy</p></td>
<td><p>Steam</p></td>
<td><p>Wii Pro</p></td>
</tr>
<tr class="row-even"><td><p>lx</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
</tr>
<tr class="row-odd"><td><p>ly</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
</tr>
<tr class="row-even"><td><p>rx</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
</tr>
<tr class="row-odd"><td><p>ry</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
</tr>
<tr class="row-even"><td><p>lt</p></td>
<td><p>L2 Trigger</p></td>
<td><p>L2 Trigger</p></td>
<td><p>LT Trigger</p></td>
<td><p>—</p></td>
<td><p>Left Trigger</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>rt</p></td>
<td><p>R2 Trigger</p></td>
<td><p>R2 Trigger</p></td>
<td><p>RT Trigger</p></td>
<td><p>—</p></td>
<td><p>Right Trigger</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>tx</p></td>
<td><p>—</p></td>
<td><p>Touch X</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>ty</p></td>
<td><p>—</p></td>
<td><p>Touch Y</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>pitch</p></td>
<td><p>Motion</p></td>
<td><p>Motion</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>roll</p></td>
<td><p>Motion</p></td>
<td><p>Motion</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>yaw_rate</p></td>
<td><p>—</p></td>
<td><p>Motion</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Standard name</p></td>
<td><p>PiHut</p></td>
<td><p>SF30 Pro</p></td>
</tr>
<tr class="row-even"><td><p>lx</p></td>
<td><p>Left X</p></td>
<td><p>Left X</p></td>
</tr>
<tr class="row-odd"><td><p>ly</p></td>
<td><p>Left Y</p></td>
<td><p>Left Y</p></td>
</tr>
<tr class="row-even"><td><p>rx</p></td>
<td><p>Right X</p></td>
<td><p>Right X</p></td>
</tr>
<tr class="row-odd"><td><p>ry</p></td>
<td><p>Right Y</p></td>
<td><p>Right Y</p></td>
</tr>
<tr class="row-even"><td><p>lt</p></td>
<td><p>L Trigger</p></td>
<td><p>L Trigger</p></td>
</tr>
<tr class="row-odd"><td><p>rt</p></td>
<td><p>R Trigger</p></td>
<td><p>R Trigger</p></td>
</tr>
<tr class="row-even"><td><p>tx</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>ty</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>pitch</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>roll</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>yaw_rate</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
</tbody>
</table>
</section>
<section id="force-feedback-effects">
<h2>Force feedback effects<a class="headerlink" href="#force-feedback-effects" title="Link to this heading">¶</a></h2>
<p>As of version <cite>2.6.3</cite> you can drive the rumble mechanism of any controller which supports it through the <a class="reference internal" href="api/input.html#approxeng.input.Controller.rumble" title="approxeng.input.Controller.rumble"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rumble()</span></code></a>
method on <a class="reference internal" href="api/input.html#approxeng.input.Controller" title="approxeng.input.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a>. It takes a number of milliseconds for the effect, defaulting to 1000 for a one second
vibration.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="changelog.html" class="btn btn-neutral float-left" title="Change Log" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="commandline.html" class="btn btn-neutral float-right" title="Command-line tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017 to 2024 Tom Oinn.
      <span class="lastupdated">Last updated on Feb 15, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>