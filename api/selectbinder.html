

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Binding - approxeng.input.selectbinder &mdash; Approximate Engineering - Input 2.6.2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Approximate Engineering - Input 2.6.2 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Controller Discovery - approxeng.input.controllers" href="discovery.html" />
    <link rel="prev" title="Common APIs - approxeng.input" href="input.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Approximate Engineering - Input
          

          
          </a>

          
            
            
              <div class="version">
                2.6.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simpleusage.html">Simple Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simpleusage.html#standard-names">Standard Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline.html">Command-line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bluetooth.html">Pairing Controllers over Bluetooth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiling.html">Profiling and Testing Controllers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="input.html">Common APIs - approxeng.input</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Binding - approxeng.input.selectbinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery.html">Controller Discovery - approxeng.input.controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dualshock3.html">PlayStation 3 Controller Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="dualshock4.html">PlayStation 4 Controller Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="xboxone.html">XBox-One S Controller Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="steamcontroller.html">Steam Controller Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="wii.html">Wii Remote Pro Controller Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="spacemousepro.html">Wired SpaceMouse Pro Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addingcontrollers.html">Adding support for a new controller type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtouse.html">Advanced Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sys.html">LEDs and Battery Monitoring</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Approximate Engineering - Input</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../api.html">API Documentation</a> &raquo;</li>
        
      <li>Binding - approxeng.input.selectbinder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="binding-approxeng-input-selectbinder">
<span id="binding-reference-label"></span><h1>Binding - approxeng.input.selectbinder<a class="headerlink" href="#binding-approxeng-input-selectbinder" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This has been re-written almost entirely in version 2.3. The simplest usage of the controller resource remains
compatible, but all more sophisticated use will have changed. In general the binder now only handles the binding
between controllers and the evdev events, leaving all forms of discovery to <a class="reference internal" href="discovery.html#discovery-reference-label"><span class="std std-ref">Controller Discovery - approxeng.input.controllers</span></a></p>
<p>A significant change is that you can now bind to and use multiple controllers by simply specifying multiple
requirements for discovery.</p>
</div>
<p>The binder provides a bridge between the low level operating system representation of your connected controller and the
high level python classes such as <a class="reference internal" href="dualshock3.html#approxeng.input.dualshock3.DualShock3" title="approxeng.input.dualshock3.DualShock3"><code class="xref py py-class docutils literal notranslate"><span class="pre">approxeng.input.dualshock3.DualShock3</span></code></a> which your code uses. The binder starts
a new thread to pull events out of the operating system and update your controller object, this is the bit that means
you don’t have to continuously poll the controller, it just updates in the background. It’s also the thread which calls
any functions you’ve bound to buttons as event handlers. You can either manually bind the controller yourself (in which
case you’re also responsible for un-binding it after you’re done!) or you can use the python ‘with’ functionality.</p>
<p>To bind a controller manually you’ll need to have already discovered it using the discovery layer. Once you have one
or more instances of <a class="reference internal" href="discovery.html#approxeng.input.controllers.ControllerDiscovery" title="approxeng.input.controllers.ControllerDiscovery"><code class="xref py py-class docutils literal notranslate"><span class="pre">approxeng.input.controllers.ControllerDiscovery</span></code></a> you can bind them manually as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.controllers</span> <span class="kn">import</span> <span class="n">find_matching_controllers</span><span class="p">,</span> <span class="n">ControllerRequirement</span>
<span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">bind_controllers</span>

<span class="n">discoveries</span> <span class="o">=</span> <span class="n">find_matching_controllers</span><span class="p">(</span><span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_snames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lx&#39;</span><span class="p">,</span><span class="s1">&#39;ly&#39;</span><span class="p">]))</span>

<span class="n">unbind_function</span> <span class="o">=</span> <span class="n">bind_controllers</span><span class="p">(</span><span class="o">*</span><span class="n">discoveries</span><span class="p">)</span>
<span class="c1"># At this point the joystick object is bound to the device and will receive updates. You can get the controller</span>
<span class="c1"># object itself, used to read axes and buttons etc, from the discovery - in this case the discoveries value is a</span>
<span class="c1"># single item list because we only asked for a single controller:</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">discoveries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">controller</span>
<span class="c1"># .... do stuff ....</span>
<span class="c1"># When we&#39;re finished, call the unbind function to free up the resources used by the binder</span>
<span class="n">unbind_function</span><span class="p">()</span>
</pre></div>
</div>
<p>Binding a controller manually works, but there’s a simpler way to handle the process (and one which avoids ever having
to worry about explicitly unbinding the controller!):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>
<span class="kn">from</span> <span class="nn">approxeng.input.dualshock3</span> <span class="kn">import</span> <span class="n">DualShock3</span>

<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">(</span><span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_class</span><span class="o">=</span><span class="n">DualShock3</span><span class="p">))</span> <span class="k">as</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># .... do stuff, the controller is bound to &#39;joystick&#39; which is a DualShock3 instance....</span>
</pre></div>
</div>
<p>On exit from the ‘with’ block the binder is automatically unbound, this includes cases where we break out of the block
because of exceptions or other error conditions. It’s a simpler and more robust way to handle the binding and I suggest
you use it instead of explicitly binding it yourself.</p>
<p>Either form can be used to bind multiple controllers as well. Either by calling <cite>bind_controllers</cite> with more than one
controller discovery, or by specifying multiple controller requirements to the <cite>ControllerResource</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">approxeng.input.selectbinder</span> <span class="kn">import</span> <span class="n">ControllerResource</span>
<span class="kn">from</span> <span class="nn">approxeng.input.dualshock3</span> <span class="kn">import</span> <span class="n">DualShock3</span>

<span class="k">with</span> <span class="n">ControllerResource</span><span class="p">(</span><span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_class</span><span class="o">=</span><span class="n">DualShock3</span><span class="p">),</span>
                        <span class="n">ControllerRequirement</span><span class="p">(</span><span class="n">require_snames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lx&#39;</span><span class="p">,</span><span class="s1">&#39;ly&#39;</span><span class="p">]))</span> <span class="k">as</span> <span class="n">ds3</span><span class="p">,</span> <span class="n">joystick</span><span class="p">:</span>
    <span class="c1"># Do stuff, if we didn&#39;t raise an error, two controllers are now bound and receiving events.</span>
    <span class="c1"># The first controller is a DualShock3, the second is any connected controller with lx and ly</span>
    <span class="c1"># controls.</span>
</pre></div>
</div>
<span class="target" id="module-approxeng.input.selectbinder"></span><dl class="py class">
<dt id="approxeng.input.selectbinder.ControllerResource">
<em class="property">class </em><code class="sig-prename descclassname">approxeng.input.selectbinder.</code><code class="sig-name descname">ControllerResource</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">requirements</span></em>, <em class="sig-param"><span class="n">print_events</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxeng/input/selectbinder.html#ControllerResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxeng.input.selectbinder.ControllerResource" title="Permalink to this definition">¶</a></dt>
<dd><p>General resource which binds one or more controllers on entry and unbinds the event listening thread on exit.</p>
<dl class="py method">
<dt id="approxeng.input.selectbinder.ControllerResource.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">requirements</span></em>, <em class="sig-param"><span class="n">print_events</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxeng/input/selectbinder.html#ControllerResource.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxeng.input.selectbinder.ControllerResource.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new resource to bind and access one or more controllers. If no additional arguments are supplied this
will find the first controller of any kind enabled by the library. Otherwise the requirements must be provided
as a list of ControllerRequirement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requirements</strong> (<a class="reference internal" href="discovery.html#approxeng.input.controllers.ControllerRequirement" title="approxeng.input.controllers.ControllerRequirement"><em>ControllerRequirement</em></a>) – ControllerRequirement instances used, in order, to find and bind controllers. If empty this will
be equivalent to supplying a single unfiltered requirement and will match the first specified controller.</p></li>
<li><p><strong>print_events</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Defaults to False, if set to True then all events picked up by the binder will be printed to stdout. Use
this when you’re trying to figure out what events correspond to what axes and buttons!</p></li>
<li><p><strong>kwargs</strong> – Any addition keyword arguments are passed to the constructors for the controller classes. This is useful
particularly to specify e.g. dead and hot zone ranges on discovery.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="discovery.html#approxeng.input.controllers.ControllerNotFoundError" title="approxeng.input.controllers.ControllerNotFoundError"><strong>ControllerNotFoundError</strong></a> – If the requirement can’t be satisfied, or no requirements are specified but there aren’t any controllers.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="approxeng.input.selectbinder.bind_controllers">
<code class="sig-prename descclassname">approxeng.input.selectbinder.</code><code class="sig-name descname">bind_controllers</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">discoveries</span></em>, <em class="sig-param"><span class="n">print_events</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/approxeng/input/selectbinder.html#bind_controllers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#approxeng.input.selectbinder.bind_controllers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bind a controller or controllers to a set of evdev InputDevice instances, starting a thread to keep those
controllers in sync with the state of the hardware.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>discoveries</strong> (<a class="reference internal" href="discovery.html#approxeng.input.controllers.ControllerDiscovery" title="approxeng.input.controllers.ControllerDiscovery"><em>ControllerDiscovery</em></a>) – ControllerDiscovery instances specifying the controllers and their associated input devices</p></li>
<li><p><strong>print_events</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Defaults to False, if set to True then all events picked up by this binder will be printed to stdout</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function which can be used to stop the event reading thread and unbind from the device</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="discovery.html" class="btn btn-neutral float-right" title="Controller Discovery - approxeng.input.controllers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="input.html" class="btn btn-neutral float-left" title="Common APIs - approxeng.input" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017, 2018, 2019, 2020 Tom Oinn
      <span class="lastupdated">
        Last updated on Aug 17, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>